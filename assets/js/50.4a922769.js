(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{503:function(t,s,e){"use strict";e.r(s);var v=e(13),a=Object(v.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"【fs-createwritestream】"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#【fs-createwritestream】"}},[t._v("#")]),t._v(" 【fs.createWriteStream】")]),t._v(" "),e("h2",{attrs:{id:"历史版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#历史版本"}},[t._v("#")]),t._v(" 历史版本")]),t._v(" "),e("table",[e("tbody",[e("tr",[e("th",[t._v("版本")]),e("th",[t._v("变更")])]),t._v(" "),e("tr",[e("td",[t._v("v16.10.0")]),t._v(" "),e("td",[e("p",[t._v("如果提供了 "),e("code",[t._v("fd")]),t._v("，则 "),e("code",[t._v("fs")]),t._v(" 选项不需要 "),e("code",[t._v("open")]),t._v(" 方法。")])])]),t._v(" "),e("tr",[e("td",[t._v("v16.10.0")]),t._v(" "),e("td",[e("p",[t._v("如果 "),e("code",[t._v("autoClose")]),t._v(" 为 "),e("code",[t._v("false")]),t._v("，则 "),e("code",[t._v("fs")]),t._v(" 选项不需要 "),e("code",[t._v("close")]),t._v(" 方法。")])])]),t._v(" "),e("tr",[e("td",[t._v("v15.4.0")]),t._v(" "),e("td",[e("p",[t._v("选项 "),e("code",[t._v("fd")]),t._v(" 接受 FileHandle 参数。")])])]),t._v(" "),e("tr",[e("td",[t._v("v14.0.0")]),t._v(" "),e("td",[e("p",[t._v("将 "),e("code",[t._v("emitClose")]),t._v(" 默认更改为 "),e("code",[t._v("true")]),t._v("。")])])]),t._v(" "),e("tr",[e("td",[t._v("v13.6.0, v12.17.0")]),t._v(" "),e("td",[e("p",[t._v("选项 "),e("code",[t._v("fs")]),t._v(" 允许覆盖使用的 "),e("code",[t._v("fs")]),t._v(" 实现。")])])]),t._v(" "),e("tr",[e("td",[t._v("v12.10.0")]),t._v(" "),e("td",[e("p",[t._v("启用 "),e("code",[t._v("emitClose")]),t._v(" 选项。")])])]),t._v(" "),e("tr",[e("td",[t._v("v7.6.0")]),t._v(" "),e("td",[e("p",[t._v("参数 "),e("code",[t._v("path")]),t._v(" 可以是使用 "),e("code",[t._v("file:")]),t._v(" 协议的 WHATWG "),e("code",[t._v("URL")]),t._v(" 对象。")])])]),t._v(" "),e("tr",[e("td",[t._v("v7.0.0")]),t._v(" "),e("td",[e("p",[t._v("传入的 "),e("code",[t._v("options")]),t._v(" 对象永远不会被修改。")])])]),t._v(" "),e("tr",[e("td",[t._v("v5.5.0")]),t._v(" "),e("td",[e("p",[t._v("现在支持 "),e("code",[t._v("autoClose")]),t._v(" 选项。")])])]),t._v(" "),e("tr",[e("td",[t._v("v2.3.0")]),t._v(" "),e("td",[e("p",[t._v("传入的 "),e("code",[t._v("options")]),t._v(" 对象现在可以是字符串。")])])]),t._v(" "),e("tr",[e("td",[t._v("v0.1.31")]),t._v(" "),e("td",[e("p",[e("span",[t._v("新增于: v0.1.31")])])])])])]),t._v(" "),e("h2",{attrs:{id:"参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("path")]),t._v(" "),e("code",[t._v("<string>")]),t._v(" | "),e("code",[t._v("<Buffer>")]),t._v("| "),e("code",[t._v("<URL>")])]),t._v(" "),e("li",[e("strong",[t._v("options")]),t._v(" "),e("code",[t._v("<string>")]),t._v(" | "),e("code",[t._v("<Object>")]),t._v("\nflags "),e("code",[t._v("<string>")]),t._v(" 请参阅对文件系统 flags 的支持。 默认值: 'w'。\nencoding "),e("code",[t._v("<string>")]),t._v(" 默认值: 'utf8'\nfd "),e("code",[t._v("<integer>")]),t._v(" | "),e("code",[t._v("<FileHandle>")]),t._v(" 默认值: null\nmode "),e("code",[t._v("<integer>")]),t._v(" 默认值: 0o666\nautoClose "),e("code",[t._v("<boolean>")]),t._v(" 默认值: true\nemitClose "),e("code",[t._v("<boolean>")]),t._v(" 默认值: true\nstart "),e("code",[t._v("<integer>")]),t._v("\nfs "),e("code",[t._v("<Object>")]),t._v(" | "),e("code",[t._v("<null>")]),t._v(" 默认值: null")]),t._v(" "),e("li",[e("strong",[t._v("返回")]),t._v(": "),e("code",[t._v("<fs.WriteStream>")])])]),t._v(" "),e("p",[t._v("options 还可以包括 "),e("code",[t._v("start")]),t._v(" 选项，以允许在文件开头的某个位置写入数据，允许的值在 "),e("code",[t._v("[0, Number.MAX_SAFE_INTEGER]")]),t._v(" 范围内。 修改文件而不是替换它可能需要将 "),e("code",[t._v("flags")]),t._v(" 选项设置为 "),e("code",[t._v("r+")]),t._v(" 而不是默认的 "),e("code",[t._v("w")]),t._v("。 "),e("code",[t._v("encoding")]),t._v(" 可以是 "),e("code",[t._v("<Buffer>")]),t._v(" 接受的任何一种。")]),t._v(" "),e("p",[t._v("如果将 "),e("code",[t._v("autoClose")]),t._v(" 设置为 "),e("code",[t._v("true")]),t._v("（默认行为），则在 'error' 或 'finish' 时文件描述符将自动关闭。 如果"),e("code",[t._v("autoClose")]),t._v(" 为 "),e("code",[t._v("false")]),t._v("，则即使出现错误，文件描述符也不会关闭。 关闭它并确保没有文件描述符泄漏是应用程序的责任。")]),t._v(" "),e("p",[t._v("默认情况下，流将在销毁后触发 '"),e("code",[t._v("close")]),t._v("' 事件。 将 "),e("code",[t._v("emitClose")]),t._v(" 选项设置为 "),e("code",[t._v("false")]),t._v(" 以更改此行为。")]),t._v(" "),e("p",[t._v("通过提供 "),e("code",[t._v("fs")]),t._v(" 选项，可以覆盖 "),e("code",[t._v("open、write、writev")]),t._v(" 和 "),e("code",[t._v("close")]),t._v(" 的相应 "),e("code",[t._v("fs")]),t._v(" 实现。 在没有 "),e("code",[t._v("writev")]),t._v("() 的情况下覆盖 "),e("code",[t._v("write")]),t._v("() 会降低性能，因为某些优化 ("),e("code",[t._v("_writev")]),t._v("()) 将被禁用。 当提供了 "),e("code",[t._v("fs")]),t._v(" 选项时，则至少需要覆盖 "),e("code",[t._v("write")]),t._v(" 和 "),e("code",[t._v("writev")]),t._v(" 之一。 如果没有提供 "),e("code",[t._v("fd")]),t._v(" 选项，则还需要覆盖 "),e("code",[t._v("open")]),t._v("。 如果 "),e("code",[t._v("autoClose")]),t._v(" 是 "),e("code",[t._v("true，则还需要覆盖")]),t._v(" "),e("code",[t._v("close")]),t._v("。")]),t._v(" "),e("p",[t._v("与 "),e("code",[t._v("<fs.ReadStream>")]),t._v(" 一样，如果指定了 fd，则 "),e("code",[t._v("<fs.WriteStream>")]),t._v(" 将忽略 path 参数并使用指定的文件描述符。 这意味着不会触发 '"),e("code",[t._v("open")]),t._v("' 事件。 "),e("code",[t._v("fd")]),t._v(" 应该是阻塞的；非阻塞 fd 应该传给 "),e("code",[t._v("<net.Socket>")]),t._v("。")]),t._v(" "),e("h2",{attrs:{id:"代码示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#代码示例"}},[t._v("#")]),t._v(" 代码示例")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ws "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWriteStream")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./index.txt"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("flags")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'w'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认读取")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("encoding")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认utf8")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fd")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取拿一个文件，默认null，createReadStream自己处理得到")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mode")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0o666")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认值可读可写不可操作")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("highWaterMark")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("autoClose")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认 ture，读取完毕后关闭文件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nws"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])])])}),[],!1,null,null,null);s.default=a.exports}}]);