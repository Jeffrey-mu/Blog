(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{495:function(s,n,a){"use strict";a.r(n);var e=a(13),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"【nginx配置】"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#【nginx配置】"}},[s._v("#")]),s._v(" 【nginx配置】")]),s._v(" "),a("h2",{attrs:{id:"一、prce的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、prce的安装"}},[s._v("#")]),s._v(" 一、prce的安装")]),s._v(" "),a("h3",{attrs:{id:"_1、下载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、下载"}},[s._v("#")]),s._v(" 1、下载：")]),s._v(" "),a("blockquote",[a("p",[s._v("wget "),a("a",{attrs:{href:"http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"_2、解压"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、解压"}},[s._v("#")]),s._v(" 2、解压：")]),s._v(" "),a("blockquote",[a("p",[s._v("tar zxvf pcre-8.35.tar.gz")])]),s._v(" "),a("h3",{attrs:{id:"_3、安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、安装"}},[s._v("#")]),s._v(" 3、安装")]),s._v(" "),a("blockquote",[a("p",[s._v("cd pcre-8.35")]),s._v(" "),a("p",[s._v("./configure")]),s._v(" "),a("p",[s._v("make && make install")])]),s._v(" "),a("h2",{attrs:{id:"二、nginx的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、nginx的安装"}},[s._v("#")]),s._v(" 二、Nginx的安装")]),s._v(" "),a("h3",{attrs:{id:"_1、下载-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、下载-2"}},[s._v("#")]),s._v(" 1、下载")]),s._v(" "),a("blockquote",[a("p",[s._v("wget "),a("a",{attrs:{href:"http://nginx.org/download/nginx-1.6.2.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://nginx.org/download/nginx-1.6.2.tar.gz"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"_2、安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、安装"}},[s._v("#")]),s._v(" 2、安装")]),s._v(" "),a("blockquote",[a("p",[a("em",[s._v("./configure --prefix=/usr/local/webserver/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/usr/local/src/pcre-8.35")])]),s._v(" "),a("p",[s._v("make")]),s._v(" "),a("p",[s._v("make install")])]),s._v(" "),a("h2",{attrs:{id:"三、配置二级域名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、配置二级域名"}},[s._v("#")]),s._v(" 三、配置二级域名")]),s._v(" "),a("blockquote",[a("p",[s._v("利用二级域名是一种充分利用的域名资源的方法，同样利用路径也可以，这和使用的服务器内部采用的映射方式有关，比如院网和工作室网站对外表现就是不同的网站，但是工作室网站的/hope只是一个路径而已，Nginx不能根据路径，可以使用二级域名使得不同应用运行在同一个一级域名下。\n以下的Nginx配置，打开不同域名也就访问了不同网站：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n    server {\n        listen       80;\n        server_name  localhost;\n\n        #charset koi8-r;\n\n        #access_log  logs/host.access.log  main;\n\n\n        location / {\n            root   /home/web/library;\n            index  index.html;\n            try_files $uri $uri/ /index.html;\n        }\n\n        #error_page  404              /404.html;\n\n        # redirect server error pages to the static page /50x.html\n        #\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n\n        # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n        #\n        #location ~ \\.php$ {\n        #    proxy_pass   http://127.0.0.1;\n        #}\n\n        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n        #\n        #location ~ \\.php$ {\n        #    root           html;\n        #    fastcgi_pass   127.0.0.1:9000;\n        #    fastcgi_index  index.php;\n        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\n        #    include        fastcgi_params;\n        #}\n\n        # deny access to .htaccess files, if Apache's document root\n        # concurs with nginx's one\n        #\n        #location ~ /\\.ht {\n        #    deny  all;\n        #}\n    }\n\nserver {\n        listen       80;\n        #域名\n        server_name  haisheteam.com code1.haisheteam.com;\n\n        location / {\n             #node.js应用的端口\n             proxy_pass http://127.0.0.1:3000;\n             root blog;\n       }\n        #静态文件交给Nginx直接处理\n        #location ~ *^.+\\.(css | js | txt | swf | mp4)$ {\n         #   root E:\\huruji\\blog\\wechat_v1.1\\public;\n          #   access_log off;\n           # expires 24h;\n       #}\n    }\n\n\n    # another virtual host using mix of IP-, name-, and port-based configuration\n    #\n    #server {\n    #    listen       8000;\n    #    listen       somename:8080;\n    #    server_name  somename  alias  another.alias;\n\n    #    location / {\n    #        root   html;\n    #        index  index.html index.htm;\n    #    }\n    #}\n\n\n\n\n    # HTTPS server\n    #\n    #server {\n    #    listen       443 ssl;\n    #    server_name  localhost;\n\n    #    ssl_certificate      cert.pem;\n    #    ssl_certificate_key  cert.key;\n\n    #    ssl_session_cache    shared:SSL:1m;\n    #    ssl_session_timeout  5m;\n\n    #    ssl_ciphers  HIGH:!aNULL:!MD5;\n    #    ssl_prefer_server_ciphers  on;\n\n    #    location / {\n    #        root   html;\n    #        index  index.html index.htm;\n    #    }\n    #}\n\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br")])]),a("h2",{attrs:{id:"四、重启"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、重启"}},[s._v("#")]),s._v(" 四、重启")]),s._v(" "),a("h3",{attrs:{id:"_1、杀掉nginx-进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、杀掉nginx-进程"}},[s._v("#")]),s._v(" 1、杀掉nginx 进程")]),s._v(" "),a("blockquote",[a("p",[s._v("killall -9 nginx")])]),s._v(" "),a("h3",{attrs:{id:"_2、重新加载配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、重新加载配置文件"}},[s._v("#")]),s._v(" 2、重新加载配置文件")]),s._v(" "),a("blockquote",[a("p",[s._v("/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf")])]),s._v(" "),a("h3",{attrs:{id:"_3、检查配置是否正确"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、检查配置是否正确"}},[s._v("#")]),s._v(" 3、检查配置是否正确")]),s._v(" "),a("blockquote",[a("p",[s._v("nginx -t")])]),s._v(" "),a("h3",{attrs:{id:"_4、重新启动nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、重新启动nginx"}},[s._v("#")]),s._v(" 4、重新启动nginx")]),s._v(" "),a("blockquote",[a("p",[s._v("进入到nginx文件夹下")]),s._v(" "),a("p",[s._v("cd /usr/local/nginx/sbin/")]),s._v(" "),a("p",[s._v("检测nginx配置")]),s._v(" "),a("p",[s._v("./nginx -t")]),s._v(" "),a("p",[s._v("重启nginx")]),s._v(" "),a("p",[s._v("./nginx -s reload")])]),s._v(" "),a("h2",{attrs:{id:"五、遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、遇到的问题"}},[s._v("#")]),s._v(" 五、遇到的问题")]),s._v(" "),a("h3",{attrs:{id:"_1、vue项目页面刷新导致404"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、vue项目页面刷新导致404"}},[s._v("#")]),s._v(" 1、vue项目页面刷新导致404")]),s._v(" "),a("blockquote",[a("p",[s._v("Nginx的配置语法灵活，可控制度非常高。在0.7以后的版本中加入了一个try_files指令，配合命名location，可以部分替代原本常用的rewrite配置方式，提高解析效率。")]),s._v(" "),a("p",[s._v("修改nginx配置文件")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("location / {\nroot ...\nindex ...\ntry_files $uri $uri/ /index.html; ---解决页面刷新404问题\n}　\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"六、查看nginx是否启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、查看nginx是否启动"}},[s._v("#")]),s._v(" 六、查看nginx是否启动")]),s._v(" "),a("div",{staticClass:"language-tex line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-tex"}},[a("code",[s._v("ps -ef | grep nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);